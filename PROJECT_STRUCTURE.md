# Pink's Pulse Dashboard - Complete Project Structure

## 🎯 Purpose
This document provides a complete map of every file in the Pink's Pulse Dashboard project. Each file is annotated with its purpose, what it does, and how it fits into the overall system. Think of this as your GPS for navigating the codebase.

## 📁 Root Directory Files

### 📄 Configuration Files
- **`package.json`** - The project's ID card. Lists all dependencies and scripts
  - Run `npm install` to install everything listed here
  - Run `npm run dev` to start development
  - Run `npm run build` to create production version

- **`.env.example`** - Template for environment variables (secrets)
  - Copy this to `.env` and fill in your actual values
  - Never commit the actual `.env` file!

- **`vite.config.js`** - Build tool configuration
  - Controls how the app is bundled for production
  - You rarely need to touch this

- **`tailwind.config.js`** - Styling framework configuration
  - Defines custom colors, fonts, and spacing
  - Pink's brand colors are defined here

- **`postcss.config.js`** - CSS processing configuration
  - Works with Tailwind to optimize styles
  - No need to modify

- **`tsconfig.json`** - TypeScript configuration
  - Ensures type safety in the code
  - Helps catch bugs before they happen

### 📋 Documentation Files
- **`README.md`** - Project overview and setup instructions
  - START HERE for initial setup
  - Contains recent updates and features

- **`DASHBOARD_CALCULATIONS.md`** - Detailed explanation of every calculation
  - How each KPI is calculated
  - SQL formulas and business logic
  - THIS IS YOUR BIBLE for understanding the math

- **`PROJECT_STRUCTURE.md`** - You are here! 
  - Complete file-by-file breakdown
  - Explains what everything does

- **`setup-guide.md`** - Initial setup instructions
  - Step-by-step guide for first-time setup
  - BigQuery configuration details

- **`PROGRESS_LOG.md`** - Development history
  - What was built and when
  - Useful for understanding evolution

## 📁 `/src` - Frontend Application Code

### 🎨 `/src/components` - User Interface Components

#### 📂 `/src/components/Dashboard`
- **`SalesKPIDashboard.tsx`** - ⭐ THE MAIN DASHBOARD COMPONENT
  - Displays all KPIs, charts, and tables
  - Fetches data from backend
  - Handles user interactions
  - Contains all chart configurations
  - THIS IS WHERE THE MAGIC HAPPENS

#### 📂 `/src/components/Auth`
- **`PasswordProtect.tsx`** - Login screen component
  - Shows password prompt
  - Handles authentication
  - Stores login state in browser

#### 📂 Other Components
- **`RainbowLoadingWave.tsx`** - Loading animation
  - Shows while data is being fetched
  - Provides visual feedback

- **`Navigation.tsx`** - Navigation menu (if used)
- **`PieChart.tsx`** - Pie chart component
- **`BarChart.tsx`** - Bar chart component
- **`TopSpending.tsx`** - Top spending display

### 🔧 `/src/hooks` - Reusable Logic
- **`useDashboardData.ts`** - Custom hook for fetching dashboard data
  - Calls the backend API
  - Manages loading states
  - Handles errors gracefully

### 🔌 `/src/services` - Backend Communication
- **`bigquery.ts`** - Service for communicating with backend
  - Makes HTTP requests to Netlify functions
  - Processes responses
  - Handles authentication

### 📝 `/src/types` - TypeScript Type Definitions
- **`dashboard.ts`** - Defines data structures
  - KPI interface
  - Quote interface
  - Job interface
  - Ensures type safety

### 🎯 `/src/utils` - Utility Functions
- **`haptics.ts`** - Mobile vibration feedback
  - Provides touch feedback on mobile
  - Enhances user experience

### 🎨 Style Files
- **`index.css`** - Global styles
  - Imports Tailwind CSS
  - Custom CSS classes
  - Font definitions

## 📁 `/netlify/functions` - Backend Serverless Functions

### 💰 **`dashboard-data-sales.js`** - ⭐ MAIN DATA ENDPOINT
  - Fetches all dashboard data from BigQuery
  - Calculates KPIs (quotes, conversions, revenue)
  - Processes time series data for charts
  - Returns formatted data to frontend
  - **THIS IS THE BRAIN OF THE OPERATION**

### 🕷️ Google Review Scrapers
- **`scrape-google-reviews-playwright.js`** - Advanced scraper
  - Uses headless browser to scrape Google Maps
  - Extracts reviews, ratings, business info
  - No API needed - just scrapes public page

- **`scrape-google-reviews.js`** - Basic scraper (backup)
  - Simple HTTP fetch approach
  - Less reliable but lighter weight

- **`google-reviews-bigquery.js`** - BigQuery reviews (deprecated)
  - Old method that read from database
  - Replaced by live scraping

## 📁 `/public` - Static Assets
- **`logo.png`** - Pink's Window Services logo
  - Displayed in sidebar and login screen
  - Should be square for best display

## 📁 `/dist` - Production Build Output
- Generated by `npm run build`
- Contains optimized files for deployment
- Never edit these directly

## 🔧 BigQuery Setup Files
- **`bigquery-setup.js`** - Initial BigQuery setup
- **`bigquery-schema-queries.sql`** - Table structure queries
- **`check-schema.sql`** - Verify table schemas
- **`test-bigquery.js`** - Test BigQuery connection
- **`test-table-info.sql`** - Inspect table details
- **`test-views.sql`** - Test BigQuery views

## 🗄️ Data Files
- **`v_jobs.json`** - Sample job data
- **`v_quotes.json`** - Sample quote data
- **`credentials/service-account.json`** - Google Cloud credentials
  - NEVER commit this file!
  - Keep it secure

## 🌐 Deployment Files
- **`.github/workflows/deploy.yml`** - Automated deployment
  - Deploys to Netlify on push to main branch
  - Runs automatically

## 🖼️ Screenshots
- Various screenshot files showing the dashboard
- Useful for documentation and troubleshooting

---

## 🔄 Data Flow Overview

1. **User visits website** → `PasswordProtect.tsx` shows login
2. **User logs in** → `SalesKPIDashboard.tsx` loads
3. **Dashboard requests data** → `useDashboardData.ts` hook activates
4. **Hook calls backend** → `dashboard-data-sales.js` function runs
5. **Backend queries BigQuery** → Gets quotes, jobs, speed data
6. **Backend processes data** → Calculates KPIs and formats response
7. **Frontend receives data** → Updates all charts and displays
8. **Google Reviews load** → `scrape-google-reviews-playwright.js` scrapes Google Maps
9. **User clicks KPI** → Modal shows calculation details

---

## 🚀 Quick Start for Non-Technical Users

1. **To view the code**: Open any `.tsx` or `.js` file in a text editor
2. **To understand calculations**: Read `DASHBOARD_CALCULATIONS.md`
3. **To see what a component does**: Look for comments at the top of the file
4. **To trace data flow**: Follow the path in "Data Flow Overview" above
5. **To modify KPI targets**: Search for "target:" in `SalesKPIDashboard.tsx`

---

## 📞 Getting Help

- **For calculation questions**: See `DASHBOARD_CALCULATIONS.md`
- **For setup issues**: See `setup-guide.md`
- **For deployment**: See `DEPLOYMENT.md`
- **For code structure**: You're reading it!

Remember: Every important calculation has comments explaining what it does and why!